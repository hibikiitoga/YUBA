# YUBA (シミュレーション結果可視化支援ツール)

自作プログラムを用いたモデルの計算を行っている方の負担を減らしつつ、
十分な可視化が自由に行えるようすることを目的として、
シミュレーション結果を多彩な描画機能をもつ可視化ソフト Paraview のための形式 (VTK) に変換するツール (YUBA) を作成しました。

## 入力ファイル形式

シミュレーション結果の座標や結合情報をタグ付けして出力指定ください。“#” から始まる行 はタグを取り扱う行とみなされます。
タグは型情報とステップ数を表す正の整数で構成されます (Cell 型を除く)。
区切り文字は半角スペースもしくはタブです。
今後、簡便のため整数値を “int”、浮動小数点数を “double” と呼びます。
(double と書かれていますが、単精度と倍精度に対応しています。)

### Coordinate タグ

“int double double double” によって構成されます。最初の数字は座標を表すインデックスです。
そのあとは xyz 座標です。

例：
```
# Coordinate 0
0 -3.390106  4.513255  0.397681
1 -16.204011 3.428250  -6.646079
2 -1.090428  -6.261492 0.346330
3 6.551411   -1.498882 2.880847
4 -5.433235  0.073200  5.981148
```

### Triangle　タグ
“int int int int” によって構成されます。最初の数字は面のインデックスです。
その後に続く数字は　Coordinate タグを用いて出力された座標に対応するインデックスであり、
これらの点を繋いだ面が作成されます。

例:
```
# Triangle 0
0 459 228 233
1 141 518 329
2 160 380 382
3 1 14 524
4 171 457 494
```

### Bead　タグ
“int double double double” によって構成されます。最初の数字は座標のインデックスです。
その後の数字は xyz 座標です。
形式は Coordinate と同様ですが、この Bead ではある大きさをもった球が描画されます。
（大きさについては後述します。）

例:
```
# Bead 0
0 -3.390106  4.513255  0.397681
1 -16.204011 3.428250  -6.646079
2 -1.090428  -6.261492 0.346330
3 6.551411   -1.498882 2.880847
4 -5.433235  0.073200  5.981148
```

### Bond タグ
“int int” によって構成されます。この数字は Bead タグを用いて出力したの同ステップの
座標のインデックスに対応する数字です。
ある太さのチューブとして描画されます。(太さについては後述します。)

例:
```
# Bond 0
1 3
4 2
6 12
5 9
10 11
```

### Cell タグ
周期境界条件などで使用する格子のためのタグです。
このタグの後に格子の一辺の長さを記述することで、
正六面体を描画することができます。
x,y,z それぞれの辺を任意の長さにしたい場合は、タグの後にそれぞれの長さを記述します。
その次の行で格子の中心座標xyzを記述します。

例：
```
# Cell 50.0 50.0 20.0
25.0  25.0  10.0
```

### スカラー値
Bead および Bond にスカラー値を付加することができます。
Bead もしくは Bond の後に記述します。
このスカラー値を適用するためにはコマンドライン引数として
scalar=true または sc=true と入力して有効化する必要があります。

例：
```
# Bead 0
0 -3.390106  4.513255  0.397681   0
1 -16.204011 3.428250  -6.646079  1
```
```
# Bond 0
1 3 0
4 2 0.4
6 12 0.2
5 9 0.4
10 11 0.8
```

## 導入
clang-4.0 以上, boost 1.58 以上が必要です。

例：
```
clang++4.0 -std=c++1y -stdlib=libc++ -I/path/boost/ -pthread -O2 YUBA.cpp -o yuba
```

## 使用
### 入力ファイルと出力ファイルの指定（必須）
入力ファイルを input.dat、また出力ファイル名を output とすると、
```
$ yuba input=input.dat output=output
$ yuba in=input.dat out=output
```
として指定してください。

### モード指定（必須）
入力ファイルからどのような vtk ファイルを作成するかという設定を行ないます。

例:
```
$ yuba input=input.dat output=output.dat mode=MODE
```
MODE の部分は、

membrane: Coordinate タグで出力された座標と Triangle タグによって指定された座標間の結合情報に基づいてメッシュを作成します。

beads: Bead タグで出力された座標を中心とする球を出力するモードです。

bonds: Bead タグによって出力された座標と、Bond タグによって指定された座標間を結んだ円柱（チューブ）を作成します。

volvox: membrane+beads

tetra: bonds+beads

### ステップ数の指定
### Beadの直径の指定
### Bondの直径の指定
### 周期境界条件の指定
### 並行処理の設定
## 最後に
不具合や、ご要望がありましたらお気軽にご連絡ください。
